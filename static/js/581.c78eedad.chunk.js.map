{"version":3,"file":"static/js/581.c78eedad.chunk.js","mappings":"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","sources":["webpack://samurai-way/./src/components/Dialogs/Dialogs.module.css?1b2e","components/Dialogs/DialogItem/DialogItem.tsx","components/Dialogs/Message/Message.tsx","components/Dialogs/SendMessageForm.tsx","components/Dialogs/Dialogs.tsx","components/Dialogs/DialogsContainer.tsx","components/common/FormsControls/FormsControls.tsx","hoc/withAuthRedirect.tsx","utils/validators/validators.ts","webpack://samurai-way/./src/components/common/FormsControls/FormsControls.module.css?eb50"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dialogs\":\"Dialogs_dialogs__Rrcgr\",\"dialogsItems\":\"Dialogs_dialogsItems__5XXfP\",\"active\":\"Dialogs_active__f5yv6\",\"dialog\":\"Dialogs_dialog__EPwo8\",\"messages\":\"Dialogs_messages__zYuAD\",\"message\":\"Dialogs_message__mD7pw\"};","import React from 'react';\r\nimport styles from './../Dialogs.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype DialogItemPropsType = {\r\n    name: string\r\n    id: string\r\n}\r\n\r\nconst DialogItem = (props: DialogItemPropsType) => {\r\n    let path = \"/dialogs/\" + props.id;\r\n\r\n  return(\r\n      <div className={styles.dialog + ' ' + styles.active}>\r\n          <NavLink to={path}>{props.name}</NavLink>\r\n      </div>\r\n  )\r\n}\r\n\r\n\r\nexport default DialogItem;","import React from 'react';\r\nimport styles from './../Dialogs.module.css'\r\n\r\ntype MessagePropsType = {\r\n    message: string\r\n}\r\n\r\nconst Message = (props: MessagePropsType) => {\r\n  return(\r\n      <div className={styles.message}>\r\n          {props.message}\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default Message;","import React from \"react\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Textarea} from \"../common/FormsControls/FormsControls\";\r\nimport {maxLength, required} from \"../../utils/validators/validators\";\r\n\r\n\r\nconst maxLength50 = maxLength(50);\r\n\r\nconst SendMessageForm: React.FC<InjectedFormProps<NewMessageType>> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field\r\n                    placeholder={'Send your message'}\r\n                    name={'newMessageBody'}\r\n                    component={Textarea}\r\n                    validate={[required, maxLength50]}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button>Send</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport const SendMessageReduxForm = reduxForm<NewMessageType>({form: 'sendNewMessage'})(SendMessageForm)\r\n\r\nexport type NewMessageType = {\r\n    newMessageBody: string\r\n}","import React, {ChangeEvent} from 'react';\r\nimport styles from './Dialogs.module.css'\r\nimport DialogItem from \"./DialogItem/DialogItem\";\r\nimport Message from \"./Message/Message\";\r\nimport {DialogsPropsType} from \"./DialogsContainer\";\r\nimport {NewMessageType, SendMessageReduxForm} from \"./SendMessageForm\";\r\n//import {Redirect} from \"react-router-dom\";\r\n\r\n\r\n\r\nconst Dialogs = (props: DialogsPropsType) => {\r\n\r\n    const dialogsElement = props.dialogsPage.dialogsData.map((d, index) => <DialogItem key={index} name={d.name} id={d.id} />);\r\n    const messagesElement = props.dialogsPage.messagesData.map((m, index) => <Message key={index} message={m.message} />);\r\n\r\n\r\n    const sendMessage = (message: NewMessageType) => {\r\n        props.onSendMessageClick(message.newMessageBody)\r\n    }\r\n    //if (!props.isAuth) return <Redirect to={\"login\"} />;\r\n\r\n    return (\r\n        <div className={styles.dialogs}>\r\n            <div className={styles.dialogsItems}>\r\n                {dialogsElement}\r\n            </div>\r\n            <div className={styles.messages}>\r\n                <div>{messagesElement}</div>\r\n            </div>\r\n            <div className={styles.messages}>\r\n                <SendMessageReduxForm onSubmit={sendMessage}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dialogs;\r\n\r\n","import React from 'react';\r\nimport {DialogsPageType, sendMessageAC} from \"../../redux/dialogs-reducer\";\r\nimport Dialogs from \"./Dialogs\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {compose, Dispatch} from \"redux\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\n\r\n\r\n\r\n\r\ntype MapStateToPropsType = {\r\n    dialogsPage: DialogsPageType\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n    //onNewMessageChange: (body: string)=>void\r\n    onSendMessageClick: (newMessageBody: string)=>void\r\n}\r\nexport type DialogsPropsType = MapDispatchToPropsType & MapStateToPropsType\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n  return {\r\n      dialogsPage: state.dialogsPage\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch): MapDispatchToPropsType => {\r\n    return {\r\n        /*onNewMessageChange: (body: string)=>{\r\n            dispatch(updateNewMessageBodyAC(body))\r\n        },*/\r\n        onSendMessageClick: (newMessageBody: string)=>{\r\n            dispatch(sendMessageAC(newMessageBody))\r\n        }\r\n    }\r\n}\r\n\r\nconst DialogsContainer = compose<React.ComponentType>(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    withAuthRedirect\r\n) (Dialogs)\r\n\r\nexport default DialogsContainer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*type DialogsContainerPropsType = {\r\n    store: any\r\n    //dialogsPage: DialogsPageType\r\n    //dispatch: (action: ActionsTypes)=>void\r\n}*/\r\n//const DialogsContainer = (props: DialogsContainerPropsType) => {\r\n\r\n\r\n//const newMessageRef = React.createRef<HTMLTextAreaElement>();\r\n/*const onSendMessageClick = () => {\r\n  //alert(newMessageRef.current?.value)\r\n    props.store.dispatch(sendMessageAC(props.store.getState().dialogsPage.newMessageBody))\r\n}*/\r\n/*const onNewMessageChange = (body: string) => {\r\n    props.store.dispatch(updateNewMessageBodyAC(body))\r\n}*/\r\n/*\r\nconst DialogsContainer = () => {\r\n    return(\r\n        <StoreContext.Consumer>\r\n            {\r\n                (store) => {\r\n                    /!*const onSendMessageClick = () => {\r\n                        store.dispatch(sendMessageAC(store.getState().dialogsPage.newMessageBody))\r\n                    }*!/\r\n                    const onSendMessageClick = () => {\r\n                        store.dispatch(sendMessageAC())\r\n                    }\r\n                    const onNewMessageChange = (body: string) => {\r\n                        store.dispatch(updateNewMessageBodyAC(body))\r\n                    }\r\n                    return (\r\n                    <Dialogs\r\n                        dialogsData={store.getState().dialogsPage.dialogsData}\r\n                        messagesData={store.getState().dialogsPage.messagesData}\r\n                        newMessageBody={store.getState().dialogsPage.newMessageBody}\r\n                        onSendMessageClick={onSendMessageClick}\r\n                        onNewMessageChange={onNewMessageChange}\r\n                    />)\r\n                }\r\n                }\r\n        </StoreContext.Consumer>\r\n    )\r\n}\r\n*/\r\n\r\n//export default DialogsContainer;","import React from 'react';\r\nimport {WrappedFieldProps} from \"redux-form\";\r\nimport s from './FormsControls.module.css';\r\n\r\n\r\ninterface TextareaProps extends WrappedFieldProps {\r\n    [key: string]: any; // можно добавить дополнительные параметры через rest-оператор\r\n}\r\n\r\nconst FormControl: React.FC<TextareaProps> = ({ children,  meta}) => {\r\n    const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={s.formControl + ' ' + (hasError ? s.error : '')}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {hasError && <span className={s.error}>{meta.error}</span>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport const Textarea: React.FC<TextareaProps> = ({input, children,  meta, ...props}) => {\r\n    return <FormControl meta={meta} input={input}><textarea {...input} {...props}/> </FormControl>\r\n    /*const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={s.formControl + ' ' + (hasError ? s.error : '')}>\r\n            <div>\r\n                <textarea {...input} {...props} />\r\n            </div>\r\n            {hasError && <span className={s.error}>{meta.error}</span>}\r\n        </div>\r\n    );*/\r\n};\r\n\r\nexport const Input: React.FC<TextareaProps> = ({input, children, meta, ...props}) => {\r\n    return <FormControl meta={meta} input={input}><input {...input} {...props}/> </FormControl>\r\n    /*const hasError = meta.touched && meta.error;\r\n    return (\r\n        <div className={s.formControl + ' ' + (hasError ? s.error : '')}>\r\n            <div>\r\n                <input {...input} {...props} />\r\n            </div>\r\n            {hasError && <span className={s.error}>{meta.error}</span>}\r\n        </div>\r\n    );*/\r\n};","import React, {ComponentType} from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../redux/redux-store\";\r\n//import Profile from \"../components/Profile/Profile\";\r\n\r\ntype MapStateToPropsType = {\r\n    isAuth: boolean\r\n}\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => {\r\n  return {\r\n      isAuth: state.auth.isAuth\r\n  }\r\n}\r\nexport function withAuthRedirect <T>(Component: ComponentType<T>) {\r\n    //debugger\r\n    const RedirectComponent = (props: MapStateToPropsType) => {\r\n      //debugger\r\n        let {isAuth, ...restProps} = props\r\n        if (!isAuth) return <Redirect to={\"/login\"} />\r\n        return <Component {...restProps as T} />\r\n    }\r\n\r\n    const ConnectedRedirectComponent = connect(mapStateToProps)(RedirectComponent)\r\n    return ConnectedRedirectComponent\r\n}","export const required = (value: string) => {\r\n  if (value) return undefined;\r\n  return 'Field is required';\r\n}\r\n\r\nexport const maxLength = (length: number) => (value: string) => {\r\n  if (value.length > length) return `Max length is ${length} symbols`;\r\n  return undefined;\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"formControl\":\"FormsControls_formControl__EJA-w\",\"error\":\"FormsControls_error__9uWXS\",\"formSummaryError\":\"FormsControls_formSummaryError__ISedJ\"};"],"names":["props","path","id","className","styles","to","name","message","maxLength50","maxLength","SendMessageReduxForm","reduxForm","form","onSubmit","handleSubmit","Field","placeholder","component","Textarea","validate","required","dialogsElement","dialogsPage","dialogsData","map","d","index","messagesElement","messagesData","m","onSendMessageClick","newMessageBody","compose","connect","state","dispatch","sendMessageAC","withAuthRedirect","Dialogs","FormControl","children","meta","hasError","touched","error","s","input","Input","mapStateToProps","isAuth","auth","Component","restProps","value","length"],"sourceRoot":""}